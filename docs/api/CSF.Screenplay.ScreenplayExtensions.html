<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class ScreenplayExtensions | Screenplay docs </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class ScreenplayExtensions | Screenplay docs ">
      
      <meta name="description" content="Extension methods for the  type.">
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/csf-dev/CSF.Screenplay/new/master/apiSpec/new?filename=CSF_Screenplay_ScreenplayExtensions.md&amp;value=---%0Auid%3A%20CSF.Screenplay.ScreenplayExtensions%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="CSF.Screenplay">
            CSF.Screenplay
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="CSF.Screenplay.ScreenplayExtensions">



  <h1 id="CSF_Screenplay_ScreenplayExtensions" data-uid="CSF.Screenplay.ScreenplayExtensions" class="text-break">
Class ScreenplayExtensions  <a class="header-action link-secondary" title="View source" href="https://github.com/csf-dev/CSF.Screenplay/blob/master/CSF.Screenplay/ScreenplayExtensions.cs/#L16"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="CSF.html">CSF</a>.<a class="xref" href="CSF.Screenplay.html">Screenplay</a></dd></dl>
  <dl><dt>Assembly</dt><dd>CSF.Screenplay.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Extension methods for the <a class="xref" href="CSF.Screenplay.Screenplay.html">Screenplay</a> type.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static class ScreenplayExtensions</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">ScreenplayExtensions</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>






  <h2 class="section" id="methods">Methods
</h2>


  <a id="CSF_Screenplay_ScreenplayExtensions_CreateScopedPerformance_" data-uid="CSF.Screenplay.ScreenplayExtensions.CreateScopedPerformance*"></a>

  <h3 id="CSF_Screenplay_ScreenplayExtensions_CreateScopedPerformance_CSF_Screenplay_Screenplay_System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Guid_" data-uid="CSF.Screenplay.ScreenplayExtensions.CreateScopedPerformance(CSF.Screenplay.Screenplay,System.Collections.Generic.IList{CSF.Screenplay.Performances.IdentifierAndName},System.Guid)">
  CreateScopedPerformance(Screenplay, IList&lt;IdentifierAndName&gt;, Guid)
  <a class="header-action link-secondary" title="View source" href="https://github.com/csf-dev/CSF.Screenplay/blob/master/CSF.Screenplay/ScreenplayExtensions.cs/#L193"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Creates a new <a class="xref" href="CSF.Screenplay.IPerformance.html">IPerformance</a>, and a new Dependency Injection scope.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static ScopeAndPerformance CreateScopedPerformance(this Screenplay screenplay, IList&lt;IdentifierAndName&gt; namingHierarchy, Guid identity = default)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>screenplay</code> <a class="xref" href="CSF.Screenplay.Screenplay.html">Screenplay</a></dt>
    <dd><p>The Screenplay from which to create the performance</p>
</dd>
    <dt><code>namingHierarchy</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ilist-1">IList</a>&lt;<a class="xref" href="CSF.Screenplay.Performances.IdentifierAndName.html">IdentifierAndName</a>&gt;</dt>
    <dd><p>A collection of identifiers and names providing the hierarchical name of this
performance; see <a class="xref" href="CSF.Screenplay.IPerformance.html#CSF_Screenplay_IPerformance_NamingHierarchy">NamingHierarchy</a> for more information.</p>
</dd>
    <dt><code>identity</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.guid">Guid</a></dt>
    <dd><p>An optional identity to use for this performance; corresponding to
<a class="xref" href="CSF.Screenplay.IHasPerformanceIdentity.html#CSF_Screenplay_IHasPerformanceIdentity_PerformanceIdentity">PerformanceIdentity</a>.  If omitted then a new identity will be generated automatically.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="CSF.Screenplay.ScopeAndPerformance.html">ScopeAndPerformance</a></dt>
    <dd><p>A <a class="xref" href="CSF.Screenplay.ScopeAndPerformance.html">ScopeAndPerformance</a> containing the newly-created performance as well as the newly-started DI scope.</p>
</dd>
  </dl>







  <h4 class="section" id="CSF_Screenplay_ScreenplayExtensions_CreateScopedPerformance_CSF_Screenplay_Screenplay_System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Guid__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This method includes the consequence/side-effect of creating a new dependency injection scope from the
<a class="xref" href="CSF.Screenplay.Screenplay.html#CSF_Screenplay_Screenplay_ServiceProvider">ServiceProvider</a> associated with the specified <a class="xref" href="CSF.Screenplay.Screenplay.html">Screenplay</a>.
That scope will be associated with the created performance and will be returned as part of the return of this method.
Please use the <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.idisposable.dispose">Dispose()</a> method the returned object when you are finished with the performance.
This ensures that the DI scope and all associated resources (including the performance) will also be properly disposed-of.
</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>If <code class="paramref">screenplay</code> is <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/keywords/null">null</a>.</p>
</dd>
  </dl>



  <a id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformance_" data-uid="CSF.Screenplay.ScreenplayExtensions.ExecuteAsPerformance*"></a>

  <h3 id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformance_CSF_Screenplay_Screenplay_System_Func_System_IServiceProvider_System_Nullable_System_Boolean___System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Int32_" data-uid="CSF.Screenplay.ScreenplayExtensions.ExecuteAsPerformance(CSF.Screenplay.Screenplay,System.Func{System.IServiceProvider,System.Nullable{System.Boolean}},System.Collections.Generic.IList{CSF.Screenplay.Performances.IdentifierAndName},System.Int32)">
  ExecuteAsPerformance(Screenplay, Func&lt;IServiceProvider, bool?&gt;, IList&lt;IdentifierAndName&gt;, int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/csf-dev/CSF.Screenplay/blob/master/CSF.Screenplay/ScreenplayExtensions.cs/#L62"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes the specified logic as a <a class="xref" href="CSF.Screenplay.Performance.html">Performance</a>, synchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void ExecuteAsPerformance(this Screenplay screenplay, Func&lt;IServiceProvider, bool?&gt; performanceLogic, IList&lt;IdentifierAndName&gt; namingHierarchy = null, int timeoutMiliseconds = 0)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>screenplay</code> <a class="xref" href="CSF.Screenplay.Screenplay.html">Screenplay</a></dt>
    <dd><p>The screenplay with which to execute the logic.</p>
</dd>
    <dt><code>performanceLogic</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.func-2">Func</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iserviceprovider">IServiceProvider</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a>?&gt;</dt>
    <dd><p>The logic to be executed by the performance.</p>
</dd>
    <dt><code>namingHierarchy</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ilist-1">IList</a>&lt;<a class="xref" href="CSF.Screenplay.Performances.IdentifierAndName.html">IdentifierAndName</a>&gt;</dt>
    <dd><p>An optional naming hierarchy used to identify the performance.</p>
</dd>
    <dt><code>timeoutMiliseconds</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>If set to a non-zero positive value, then the performance logic will be aborted after the specified timeout in milliseconds.</p>
</dd>
  </dl>








  <h4 class="section" id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformance_CSF_Screenplay_Screenplay_System_Func_System_IServiceProvider_System_Nullable_System_Boolean___System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Int32__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This method is the primary entry point for beginning a Screenplay <a class="xref" href="CSF.Screenplay.Performance.html">Performance</a>.
This method begins a new Dependency Injection Scope, and within that scope starts the performance, which executes the specified
performance logic: <code class="paramref">performanceLogic</code>.
The return value from the performance logic should conform to the semantics of the parameter value passed to
<a class="xref" href="CSF.Screenplay.Performance.html#CSF_Screenplay_Performance_FinishPerformance_System_Nullable_System_Boolean__">FinishPerformance(bool?)</a>.
</p>
<p>
The <code class="paramref">namingHierarchy</code> may be used to give the performance a name, so that its results (and subsequent report)
may be identified. This parameter has the same semantics as <a class="xref" href="CSF.Screenplay.Performance.html#CSF_Screenplay_Performance_NamingHierarchy">NamingHierarchy</a>.
</p>
<p>
Use this method only if <a class="xref" href="CSF.Screenplay.Screenplay.html#CSF_Screenplay_Screenplay_ExecuteAsPerformanceAsync_System_Func_System_IServiceProvider_System_Threading_CancellationToken_System_Threading_Tasks_Task_System_Nullable_System_Boolean____System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Threading_CancellationToken_">ExecuteAsPerformanceAsync(Func&lt;IServiceProvider, CancellationToken, Task&lt;bool?&gt;&gt;, IList&lt;IdentifierAndName&gt;, CancellationToken)</a> is not viable.
This method executes the logic asynchronously, as is the architecture of Screenplay, but then uses <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task.wait#system-threading-tasks-task-wait(system-threading-cancellationtoken)">Wait(CancellationToken)</a> to convert
the asynchronous result into a synchronous one.
</p>
<p>
If <code class="paramref">timeoutMiliseconds</code> is not specified, or specified with a zero value then there will be no timeout
applied to the performance's logic.  If specified with a positive integer then the performance logic will be aborted if
the specified timeout (in milliseconds) is exceeded.
Please be aware that - as with <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task.wait#system-threading-tasks-task-wait(system-threading-cancellationtoken)">Wait(CancellationToken)</a> - if the timeout duration is exceded, the synchronous performance
logic is not actually aborted.  The thread on which this method is executed will stop waiting for the thread on which the performance
logic is running, but the performance logic thread will still continue, typically to completion.
All this means is that when the performance logic eventually does complete, its results are discarded because the Screenplay 'gave up waiting'
for it.
</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>If either <code class="paramref">screenplay</code> or <code class="paramref">performanceLogic</code> is <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/keywords/null">null</a>.</p>
</dd>
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentoutofrangeexception">ArgumentOutOfRangeException</a></dt>
    <dd><p>If <code class="paramref">timeoutMiliseconds</code> is a negative number.</p>
</dd>
  </dl>

  <dl class="typelist seealso">
    <dt>See Also</dt>
    <dd>
    <div><a class="xref" href="CSF.Screenplay.ScreenplayExtensions.html#CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformance_CSF_Screenplay_Screenplay_System_Func_System_IServiceProvider_System_Nullable_System_Boolean___System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Threading_CancellationToken_">ExecuteAsPerformance(Screenplay, Func&lt;IServiceProvider, bool?&gt;, IList&lt;IdentifierAndName&gt;, CancellationToken)</a></div>
    </dd>
  </dl>


  <a id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformance_" data-uid="CSF.Screenplay.ScreenplayExtensions.ExecuteAsPerformance*"></a>

  <h3 id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformance_CSF_Screenplay_Screenplay_System_Func_System_IServiceProvider_System_Nullable_System_Boolean___System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Threading_CancellationToken_" data-uid="CSF.Screenplay.ScreenplayExtensions.ExecuteAsPerformance(CSF.Screenplay.Screenplay,System.Func{System.IServiceProvider,System.Nullable{System.Boolean}},System.Collections.Generic.IList{CSF.Screenplay.Performances.IdentifierAndName},System.Threading.CancellationToken)">
  ExecuteAsPerformance(Screenplay, Func&lt;IServiceProvider, bool?&gt;, IList&lt;IdentifierAndName&gt;, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/csf-dev/CSF.Screenplay/blob/master/CSF.Screenplay/ScreenplayExtensions.cs/#L106"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes the specified logic as a <a class="xref" href="CSF.Screenplay.Performance.html">Performance</a>, synchronously.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void ExecuteAsPerformance(this Screenplay screenplay, Func&lt;IServiceProvider, bool?&gt; performanceLogic, IList&lt;IdentifierAndName&gt; namingHierarchy, CancellationToken cancellationToken)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>screenplay</code> <a class="xref" href="CSF.Screenplay.Screenplay.html">Screenplay</a></dt>
    <dd><p>The screenplay with which to execute the logic.</p>
</dd>
    <dt><code>performanceLogic</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.func-2">Func</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.iserviceprovider">IServiceProvider</a>, <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a>?&gt;</dt>
    <dd><p>The logic to be executed by the performance.</p>
</dd>
    <dt><code>namingHierarchy</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ilist-1">IList</a>&lt;<a class="xref" href="CSF.Screenplay.Performances.IdentifierAndName.html">IdentifierAndName</a>&gt;</dt>
    <dd><p>A naming hierarchy used to identify the performance; if <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/keywords/null">null</a> then an empty name will be used.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>A cancellation token, which if cancelled will abort waiting for <code class="paramref">performanceLogic</code> to complete.</p>
</dd>
  </dl>








  <h4 class="section" id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformance_CSF_Screenplay_Screenplay_System_Func_System_IServiceProvider_System_Nullable_System_Boolean___System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Threading_CancellationToken__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This method is the primary entry point for beginning a Screenplay <a class="xref" href="CSF.Screenplay.Performance.html">Performance</a>.
This method begins a new Dependency Injection Scope, and within that scope starts the performance, which executes the specified
performance logic: <code class="paramref">performanceLogic</code>.
The return value from the performance logic should conform to the semantics of the parameter value passed to
<a class="xref" href="CSF.Screenplay.Performance.html#CSF_Screenplay_Performance_FinishPerformance_System_Nullable_System_Boolean__">FinishPerformance(bool?)</a>.
</p>
<p>
The <code class="paramref">namingHierarchy</code> may be used to give the performance a name, so that its results (and subsequent report)
may be identified. This parameter has the same semantics as <a class="xref" href="CSF.Screenplay.Performance.html#CSF_Screenplay_Performance_NamingHierarchy">NamingHierarchy</a>.
</p>
<p>
Use this method only if <a class="xref" href="CSF.Screenplay.Screenplay.html#CSF_Screenplay_Screenplay_ExecuteAsPerformanceAsync_System_Func_System_IServiceProvider_System_Threading_CancellationToken_System_Threading_Tasks_Task_System_Nullable_System_Boolean____System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Threading_CancellationToken_">ExecuteAsPerformanceAsync(Func&lt;IServiceProvider, CancellationToken, Task&lt;bool?&gt;&gt;, IList&lt;IdentifierAndName&gt;, CancellationToken)</a> is not viable.
This method executes the logic asynchronously, as is the architecture of Screenplay, but then uses <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task.wait#system-threading-tasks-task-wait(system-threading-cancellationtoken)">Wait(CancellationToken)</a> to convert
the asynchronous result into a synchronous one.
</p>
<p>
If <code class="paramref">cancellationToken</code> is not specified then no cancellation/abort logic will be applied.
If specified, and the token is cancelled, then the Screenplay will abort waiting for the performance logic to complete.
Please be aware that - as with <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task.wait#system-threading-tasks-task-wait(system-threading-cancellationtoken)">Wait(CancellationToken)</a> - if the token is cancelled, the synchronous performance
logic is not actually aborted.  The thread on which this method is executed will stop waiting for the thread on which the performance
logic is running, but the performance logic thread will still continue, typically to completion.
All this means is that when the performance logic eventually does complete, its results are discarded because the Screenplay 'gave up waiting'
for it.
</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>If either <code class="paramref">screenplay</code> or <code class="paramref">performanceLogic</code> is <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/keywords/null">null</a>.</p>
</dd>
  </dl>



  <a id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformanceAsync_" data-uid="CSF.Screenplay.ScreenplayExtensions.ExecuteAsPerformanceAsync*"></a>

  <h3 id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformanceAsync__1_CSF_Screenplay_Screenplay_System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Threading_CancellationToken_" data-uid="CSF.Screenplay.ScreenplayExtensions.ExecuteAsPerformanceAsync``1(CSF.Screenplay.Screenplay,System.Collections.Generic.IList{CSF.Screenplay.Performances.IdentifierAndName},System.Threading.CancellationToken)">
  ExecuteAsPerformanceAsync&lt;T&gt;(Screenplay, IList&lt;IdentifierAndName&gt;, CancellationToken)
  <a class="header-action link-secondary" title="View source" href="https://github.com/csf-dev/CSF.Screenplay/blob/master/CSF.Screenplay/ScreenplayExtensions.cs/#L164"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Executes the logic with a specified imlpementation of <a class="xref" href="CSF.Screenplay.IHostsPerformance.html">IHostsPerformance</a> as a <a class="xref" href="CSF.Screenplay.Performance.html">Performance</a></p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static Task ExecuteAsPerformanceAsync&lt;T&gt;(this Screenplay screenplay, IList&lt;IdentifierAndName&gt; namingHierarchy = null, CancellationToken cancellationToken = default) where T : IHostsPerformance</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>screenplay</code> <a class="xref" href="CSF.Screenplay.Screenplay.html">Screenplay</a></dt>
    <dd><p>The screenplay with which to execute the logic.</p>
</dd>
    <dt><code>namingHierarchy</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ilist-1">IList</a>&lt;<a class="xref" href="CSF.Screenplay.Performances.IdentifierAndName.html">IdentifierAndName</a>&gt;</dt>
    <dd><p>An optional naming hierarchy used to identify the performance.</p>
</dd>
    <dt><code>cancellationToken</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.cancellationtoken">CancellationToken</a></dt>
    <dd><p>An optional cancellation token to abort the performance logic.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.threading.tasks.task">Task</a></dt>
    <dd><p>A task which completes when the performance's logic has completed.</p>
</dd>
  </dl>

  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd><p>The concrete type of an implementation of <a class="xref" href="CSF.Screenplay.IHostsPerformance.html">IHostsPerformance</a> which contains the performance logic.</p>
</dd>
  </dl>






  <h4 class="section" id="CSF_Screenplay_ScreenplayExtensions_ExecuteAsPerformanceAsync__1_CSF_Screenplay_Screenplay_System_Collections_Generic_IList_CSF_Screenplay_Performances_IdentifierAndName__System_Threading_CancellationToken__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>
This method is a convenient way to execute performances, where the logic for the performance is contained within a concrete type.
This method begins a new Dependency Injection Scope, and within that scope starts the performance.
It resolves an instance of the specified <code class="typeparamref">T</code> from the DI container, and executes its
<a class="xref" href="CSF.Screenplay.IHostsPerformance.html#CSF_Screenplay_IHostsPerformance_ExecutePerformanceAsync_System_Threading_CancellationToken_">ExecutePerformanceAsync(CancellationToken)</a> method to get the performance result.
</p>
<p>
An advantage of using this method is that the performance logic is encapsulated within a class, and that the service provider is
used to resolve only a single object instance, thus avoiding the service locator anti-pattern.
</p>
<p>
The <code class="paramref">namingHierarchy</code> may be used to give the performance a name, so that its results (and subsequent report)
may be identified. This parameter has the same semantics as <a class="xref" href="CSF.Screenplay.Performance.html#CSF_Screenplay_Performance_NamingHierarchy">NamingHierarchy</a>.
</p>
<p>
Note that if the specified implementation of <a class="xref" href="CSF.Screenplay.IHostsPerformance.html">IHostsPerformance</a> raises a <a class="xref" href="CSF.Screenplay.Performables.PerformableException.html">PerformableException</a> then
this method will catch that exception and not rethrow.  In that case:
</p>
<ul><li>
An event will be raised with the event bus: <a class="xref" href="CSF.Screenplay.Performances.IHasPerformanceEvents.html">IHasPerformanceEvents</a>, specifically <a class="xref" href="CSF.Screenplay.Performances.IHasPerformanceEvents.html#CSF_Screenplay_Performances_IHasPerformanceEvents_PerformableFailed">PerformableFailed</a>.
This will contain details of the exception which occurred; subscribers to be informed that the performance has failed.
</li><li>The performance will be immediately terminated and placed into the <a class="xref" href="CSF.Screenplay.Performances.PerformanceState.html#CSF_Screenplay_Performances_PerformanceState_Failed">Failed</a> state.</li></ul>
<p>
Any other exception, which does not derive from <a class="xref" href="CSF.Screenplay.Performables.PerformableException.html">PerformableException</a>, will not be caught by this method and will propagate outward.
These exceptions will be interpreted as an error within the Screenplay architecture, since the <a class="xref" href="CSF.Screenplay.Actor.html">Actor</a> class will always catch and rethrow
any exception encountered from any overload of <code>PerformAsync</code>, wrapped as the inner exception of a <a class="xref" href="CSF.Screenplay.Performables.PerformableException.html">PerformableException</a>.
</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>If the <code class="paramref">screenplay</code> is <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/keywords/null">null</a>.</p>
</dd>
  </dl>

  <dl class="typelist seealso">
    <dt>See Also</dt>
    <dd>
    <div><a class="xref" href="CSF.Screenplay.IHostsPerformance.html">IHostsPerformance</a></div>
    </dd>
  </dl>



</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/csf-dev/CSF.Screenplay/blob/master/CSF.Screenplay/ScreenplayExtensions.cs/#L16" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
